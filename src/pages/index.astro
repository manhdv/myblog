---
import BaseLayout from '../layouts/BaseLayout.astro'
import { SITE_BASE, SocialLinks } from '../consts'
import { Icon } from 'astro-icon/components'
import BlogCard from '../components/BlogCard.astro'
import { getCollection } from 'astro:content'

const posts = (await getCollection('blog'))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 4)
---

<BaseLayout>
	<main
		class="app-container flex flex-col gap-12 justify-center py-36 md:py-48 pt-44 md:pt-56 relative"
	>
		<div>
			<p class="block text-3xl opacity-70 mt-9 mb-4">Chào mừng đến với</p>
			<h1 class="text-8xl font-bold leading-none">DCA or Die</h1>
		</div>
		<p class="text-2xl max-w-2xl font-light leading-normal">
			Blog đầu tư cá nhân.
		</p>
		<div class="flex flex-wrap gap-8">
			{
				SocialLinks.map((link) => (
					<a
						class="text-xl text-primary dark:text-primary-dark underline hover:underline underline-offset-4"
						href={link.url}
						target="_blank"
					>
						{link.name}
					</a>
				))
			}
		</div>
	</main>

	<!-- Recent Posts Section -->
	<section class="app-container">
		<h2 class="section-title">Bài mới</h2>
		<div class="posts-grid-container">
			{posts.map((post) => <BlogCard post={post} />)}
		</div>
		<a class="btn-secondary" href={`${SITE_BASE}/blog`}
			>Đọc tiếp
			<Icon size={20} name="mdi:arrow-right" />
		</a>
	</section>

	<!-- Recent Posts Section -->
	<section class="app-container py-42 grid lg:grid-cols-2 gap-28 lg:gap-10">
		<div class="space-y-6">
			<h2 class="section-title">Về tôi</h2>
			<p class="text-lg max-w-xl pb-4">
				Tôi viết ở đây cho đỡ quên cảm nghĩ cá nhân về thị trường, cách tôi chọn
				cổ phiếu, và vài triết lý sống còn kiểu “đều tay, không múa may”. Không
				chase trend, không đu đỉnh,không thần tượng hóa mấy cái chart hình răng
				cưa. Tôi chỉ tin vào DCA, đọc báo cáo, và mua những thứ tôi đủ kiên nhẫn
				để giữ cả chục năm.
			</p>
			<a class="btn-secondary" href={`${SITE_BASE}/about`}
				>Xem thêm
				<Icon size={20} name="mdi:arrow-right" />
			</a>
		</div>
		<div class="space-y-6">
			<h2 class="section-title">Liên hệ</h2>
			<p class="text-lg max-w-xl">
				Dùng các nút bên dưới để xem CV hoặc gửi email cho tôi.
			</p>
			<div class="flex flex-wrap mt-auto space-x-4">
				<a
					class="btn-primary"
					href="mailto:example@email.com"
					download
					target="_blank"
					>Gửi email
					<Icon height={20} name="mdi:email" />
				</a>
				<a class="btn-secondary" href="/"
					>Tải CV
					<Icon height={20} name="mdi:arrow-collapse-down" />
				</a>
			</div>
		</div>
	</section>
</BaseLayout>
